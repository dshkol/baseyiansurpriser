% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils-normalize.R
\name{funnel_zscore}
\alias{funnel_zscore}
\title{Funnel Z-Score (de Moivre)}
\usage{
funnel_zscore(observed, expected, sample_size, type = c("count", "proportion"))
}
\arguments{
\item{observed}{Numeric vector of observed counts or rates}

\item{expected}{Numeric vector of expected values (e.g., from base rate)}

\item{sample_size}{Numeric vector of sample sizes (e.g., population)}

\item{type}{Type of data: "count" (Poisson) or "proportion" (binomial)}
}
\value{
Numeric vector of z-scores
}
\description{
Computes z-scores accounting for sampling variability using de Moivre's
equation. This normalizes observed values by their expected standard error.
}
\details{
For count data (Poisson), SE = sqrt(expected).
For proportion data (binomial), SE = sqrt(p * (1-p) / n).

Larger sample sizes result in smaller standard errors, so the same
deviation is more "surprising" for larger samples.
}
\examples{
# Observed crimes vs expected (from overall rate)
observed <- c(50, 100, 150)
expected <- c(45, 95, 160)
sample_size <- c(10000, 50000, 100000)
funnel_zscore(observed, expected, sample_size, type = "count")
}
